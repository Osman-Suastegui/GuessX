<div class="home-root">
  <div class="anime-gradient-bg" aria-hidden="true"></div>
  <div class="halftone-overlay" aria-hidden="true"></div>

  <main class="home-main" aria-labelledby="home-title">
    <header class="hero-header">
      <!-- <div class="language-chip">
        <span>üåê</span>
        <span>EN</span>
      </div> -->

      <div class="brand-block">
        <h1 id="home-title" class="brand-title">GUESSX</h1>
        <p class="brand-subtitle">SHOWDOWN</p>
      </div>
    </header>

    <div class="home-grid">
      <section class="setup-panel" aria-labelledby="setup-title">
        <div class="setup-tabs">
          <button class="tab-active" type="button">PLAYER SETUP</button>
          <!-- <button class="tab-inactive" type="button">ACCOUNT</button> -->
        </div>

        <div class="setup-content">
          <div class="avatar-wrap">
            <div class="avatar-frame">
              <img
                alt="Anime Avatar"
                class="avatar-image"
                src="https://lh3.googleusercontent.com/aida-public/AB6AXuA9y4CeMyA5RtrP3tpHYXF3rF0hoJJBdRNl97r1rI3yQ-TexQPI9VvUPINWfrDZfE2J62nswNZku_zfNV1dmxJhziJ-I4T5d6-lvFHJkvEZZWA5fohN4xLr3rJU8tVVzU6qHapuS1U5yqwpTETjID2JNYGmPQId5_pOLkAwSdUzhiV8tZrjGHkLy1nrKDYCy5YusfxRrkx5ZmNcxqsQImuCw-furaDPOkv3ENTgDGqCEDhTQTSgKsU3MfMs_UyYWboSy2PIh2dZXh-9"
              />
            </div>
            <button class="avatar-refresh" type="button" aria-label="Refresh avatar">‚Üª</button>
          </div>

          <div class="setup-form">
            <h2 id="setup-title" class="nickname-label">CHOOSE NICKNAME</h2>
            <input
              class="nickname-input"
              type="text"
              [value]="playerName"
              (input)="onNameChange($event)"
              placeholder="SHINOBI_USER"
              minlength="2"
              maxlength="24"
              autocomplete="nickname"
            />
          </div>
        </div>

        @if (!showGameSettingsPanel) {
          <div class="setup-actions">
            <button class="create-btn" type="button" (click)="showGameSettings()" [disabled]="isLoading || !isNameValid()">
              <span class="create-btn-text">‚ñ∂ CREATE ROOM</span>
              <span class="create-badge">GO!</span>
            </button>

            <button class="join-btn" type="button" (click)="requestJoiningCode()" [disabled]="isLoading || !isNameValid()">JOIN ROOM</button>
          </div>
        }
        @if (showGameSettingsPanel) {
          <button class="create-btn" type="button" (click)="hideGameSettings()" [disabled]="isLoading || !isNameValid()">
            <span class="create-btn-text">Return</span>
            <span class="create-badge">BACK!</span>
          </button>
        }
      </section>

      @if (showHowToPanel) {
        <section class="howto-panel" aria-labelledby="howto-title">
          <h2 id="howto-title" class="howto-title">HOW TO PLAY</h2>

          <div class="howto-media">
            <div class="howto-bubble">I think it's Goku!</div>
            <img
              alt="Player"
              class="howto-player-image"
              src="https://lh3.googleusercontent.com/aida-public/AB6AXuDKGjW1LWHY_gH0QAJS1SBIwPSqRwZfp9xScNDPanaLX1s8droB-mwGe8p_HboIDOPzIlfrEmKwKdcYHkx0DcWR4hu77ZjzEJIm70FIa67F6f5Xnq_G0xBY1nS_2rONeCKlIdZhkAcF7hj_mgBQQ9LycBd0iNQdiJfldFglvMiQIWdfbgSJIkGHtjP_KfmmD9jzdgqcy3qNVzEILO5f9jnDLTj2jwSCIPTwHefvUrwjST0dzjxaAR2H5KXH9wmKFbteGh2G2TKEH6SJ"
            />
            <div class="howto-puzzle">üß©</div>
          </div>

          <div class="howto-steps" aria-live="polite">
            @for (step of instructionSteps; track step.number; let index = $index) {
              <article class="howto-step" [class.step-active]="index === currentStep" [attr.aria-hidden]="index !== currentStep">
                <h3 class="howto-step-title">{{ step.number }}. {{ step.title.toUpperCase() }}</h3>
                <p class="howto-step-desc">{{ step.description }}</p>
              </article>
            }
          </div>

          <div class="howto-nav">
            <button class="howto-arrow" type="button" (click)="previousStep()" aria-label="Previous step">‚Äπ</button>
            <div class="howto-dots" role="tablist" aria-label="Instruction steps">
              @for (step of steps; track step; let index = $index) {
                <button
                  class="howto-dot"
                  type="button"
                  role="tab"
                  [class.howto-dot-active]="index === currentStep"
                  [attr.aria-selected]="index === currentStep"
                  [attr.aria-label]="'Go to step ' + (index + 1)"
                  (click)="setCurrentStep(index)"
                ></button>
              }
            </div>
            <button class="howto-arrow" type="button" (click)="nextStep()" aria-label="Next step">‚Ä∫</button>
          </div>
        </section>
      }

      @if (showGameSettingsPanel) {
        <app-room-configurator (startGame)="createGame($event)"></app-room-configurator>
      }
    </div>

    <footer class="home-footer">
      <div class="footer-brand">GuessX</div>
      <nav class="footer-nav" aria-label="Footer links">
        <a href="#">Terms</a>
        <a href="#">Privacy</a>
        <a href="#">Assets</a>
        <a href="#">Contact</a>
      </nav>
    </footer>
  </main>

  <div class="watermark" aria-hidden="true">KAKKOII!</div>
</div>
