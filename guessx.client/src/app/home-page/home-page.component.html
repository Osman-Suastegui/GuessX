<div class="page-shell">
  <div class="card-shell">
    <!-- Header -->
    <header class="hero">
      <div class="brand-row">
        <h1 class="brand"><span class="brand-cyan">Guess</span><span class="brand-white">X</span></h1>
        <img src="assets/logo/coloredLogoTransparent.png" class="brand-logo" alt="Logo" />
      </div>
      <p class="tagline">Anime fragment guessing game</p>
    </header>

    <!-- Main Content Grid -->
    <div class="content-grid">
      <!-- Left Section - Player Setup -->
      <section class="panel join-panel">
        <h2 class="panel-title">Join the Game</h2>

        <div class="avatar-circle">
          <svg class="avatar-icon" fill="currentColor" viewBox="0 0 24 24">
            <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z" />
          </svg>
        </div>

        <label class="field-label">Player Name</label>
        <input type="text" placeholder="Enter your name..." [(ngModel)]="playerName" (input)="onNameChange($event)" class="text-input" />

        <button [disabled]="!isNameValid() || isLoading" [class]="getButtonClasses()" class="primary-btn w-full" *ngIf="!isNameValid()">
          {{ "Enter name" }}
        </button>
        <div *ngIf="isNameValid()" class="actions-row">
          <button (click)="requestJoiningCode()" [class]="getButtonClasses()" class="ghost-btn">
            {{ "Join Room" }}
          </button>

          <button [disabled]="!isNameValid() || isLoading" (click)="createGame()" [class]="getButtonClasses()" class="primary-btn">
            {{ "Create Room" }}
          </button>
        </div>
      </section>

      <!-- Right Section - Instructions Carousel -->
      <section class="panel carousel-panel">
        <div class="carousel-surface">
          <div class="carousel-viewport">
            <ng-container *ngFor="let step of instructionSteps; let i = index">
              <div
                class="carousel-slide"
                [class.slide-active]="currentStep === i"
                [class.slide-next]="currentStep > i"
                [class.slide-prev]="currentStep < i"
              >
                <ng-container *ngTemplateOutlet="instructionCard; context: { step: step }"></ng-container>
              </div>
            </ng-container>
          </div>
        </div>

        <div class="dots">
          <button *ngFor="let step of steps; let i = index" (click)="setCurrentStep(i)" class="dot" [class.dot-active]="currentStep === i"></button>
        </div>

        <div class="nav-arrows">
          <button (click)="previousStep()" class="nav-btn" aria-label="Previous">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
            </svg>
          </button>
          <button (click)="nextStep()" class="nav-btn" aria-label="Next">
            <svg class="nav-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
            </svg>
          </button>
        </div>
      </section>
    </div>

    <footer class="footer-note">
      test
    </footer>
  </div>
</div>

<!-- Instruction Card Template -->
<ng-template #instructionCard let-step="step">
  <div class="instruction-card">
    <div class="instruction-number" [class]="step.bgColor">{{ step.number }}</div>
    <h3 class="instruction-title">{{ step.title }}</h3>
    <p class="instruction-text">{{ step.description }}</p>
  </div>
</ng-template>
