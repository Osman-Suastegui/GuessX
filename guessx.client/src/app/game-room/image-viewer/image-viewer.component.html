<div class="viewer-shell">
  <header class="viewer-header">
    <div class="viewer-title-wrap">
      <p class="viewer-title">WHO'S THAT ANIME?</p>
      <p class="viewer-subtitle">Players: {{ roomState?.users?.length || 0 }}</p>
    </div>
    <div class="viewer-badge">GUESSX</div>
  </header>

  <div class="timer-wrap">
    <app-time-bar
      #timerBar
      [roundDuration]="roundDuration"
      [currentHint]="currentHint"
      [maxHints]="maxHints"
      (skip)="handleSkip()"
      (timeEnded)="handleTimeEnd()"
    ></app-time-bar>
  </div>

  <section class="wrapper-image">
    <img #imgEl [src]="animeImageSrc" alt="Anime image" />
    <canvas #maskCanvas class="mask-canvas"></canvas>
    <div class="watermark">GUESSX</div>
  </section>

  <section class="reveal-progress">
    <div class="reveal-top">
      <span>REVEAL PROGRESS</span>
      <span>{{ (currentHint / maxHints) * 100 | number: "1.0-0" }}% REVEALED</span>
    </div>
    <div class="reveal-track">
      <div class="reveal-fill" [style.width.%]="(currentHint / maxHints) * 100"></div>
    </div>
  </section>

  <h1 class="image-viewer-anime-name" *ngIf="isTheWholeAnimeRevealed">{{ animeInformation.name }}</h1>
</div>
